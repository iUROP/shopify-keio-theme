<div class="product-form__buttons--subs-selector">
  <div class="product-form__buttons--subs-selector__heading">
    <span>
      Frecuencia de pago
      <div class="selected-option">Anual</div>
    </span>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
      <mask id="mask0_13558_5736" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24" height="24">
        <rect width="24" height="24" fill="#D9D9D9"></rect>
      </mask>
      <g mask="url(#mask0_13558_5736)">
        <path d="M11.9998 14.975C11.8665 14.975 11.7415 14.9542 11.6248 14.9125C11.5081 14.8708 11.3998 14.8 11.2998 14.7L6.6998 10.1C6.51647 9.91665 6.4248 9.68332 6.4248 9.39999C6.4248 9.11665 6.51647 8.88332 6.6998 8.69999C6.88314 8.51665 7.11647 8.42499 7.3998 8.42499C7.68314 8.42499 7.91647 8.51665 8.0998 8.69999L11.9998 12.6L15.8998 8.69999C16.0831 8.51665 16.3165 8.42499 16.5998 8.42499C16.8831 8.42499 17.1165 8.51665 17.2998 8.69999C17.4831 8.88332 17.5748 9.11665 17.5748 9.39999C17.5748 9.68332 17.4831 9.91665 17.2998 10.1L12.6998 14.7C12.5998 14.8 12.4915 14.8708 12.3748 14.9125C12.2581 14.9542 12.1331 14.975 11.9998 14.975Z" fill="#5C5E5C"></path>
      </g>
    </svg>
  </div>
  <div class="product-form__buttons--subs-selector__options"></div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    window.runPlans = function() {
      const hasSubs = document.querySelector('.shopify_subscriptions_app_block:not(.shopify_subscriptions_app_block--hidden) .shopify_subscriptions_fieldset')
      const customSubs = document.querySelector('.product-form__buttons--subs-selector')
      const hasCustomSubs = document.querySelector('.product-form__buttons--subs-selector__options .product-form__buttons--subs-selector__options--item')

      if (hasSubs && customSubs) {
        if (hasCustomSubs) {
          const plans = hasSubs.querySelectorAll('.shopify_subscriptions_app_block_label')
          const customSubscriptions = document.querySelectorAll('.product-form__buttons--subs-selector__options--item')

          plans.forEach((plan, index) => {
            const price = plan.querySelector('.shopify_subscriptions_purchase_option_wrapper .shopify_subscriptions_in_widget_price').innerText
            customSubscriptions[index].setAttribute('rel-price', price)
          })
        } else {
          customSubs.classList.add('show')
          const plans = hasSubs.querySelectorAll('.shopify_subscriptions_app_block_label')
          let htmlOptions = ``

          plans.forEach((plan, index) => {
            const name = plan.querySelector('.shopify_subscriptions_purchase_option_wrapper label').innerText
            const price = plan.querySelector('.shopify_subscriptions_purchase_option_wrapper .shopify_subscriptions_in_widget_price').innerText
            const planID = plan.querySelector('.shopify_subscriptions_app_block_label_children li label input').getAttribute('data-selling-plan-id')
            htmlOptions += `<div class="product-form__buttons--subs-selector__options--item ${name} ${index == 1 ? 'active' : ''}" rel-price="${price}" rel-plan-id="${planID}">${name}</div>`
          })
          document.querySelector('.product-form__buttons--subs-selector__options').innerHTML = htmlOptions
        }
      }
    }

    setInterval(function(){
      window.runPlans();
    }, 2000);
    

  });
</script>